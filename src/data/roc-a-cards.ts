/**
 * Standalone ROC-A radio procedure decision cards.
 * These test radio operating knowledge from RIC-21 that goes beyond PSTAR Section 3.
 * Each card has a hand-verified correct answer. They are NOT in the TP 11919 question bank.
 *
 * Source: RIC-21 Study Guide for the Restricted Operator Certificate with
 * Aeronautical Qualification (ROC-A), Industry Canada.
 */

export type RocACard = {
  id: string;                    // "roc-" prefix to distinguish from PSTAR IDs
  stem: string;
  options: [string, string, string, string];
  correctOption: 1 | 2 | 3 | 4;
  explanation: string;
  flightContext: string;
  phase: "preflight" | "taxi_depart" | "enroute" | "arrival";
  riskPoints: number;
  isCritical: boolean;
  sectionName: string;
  source: string;                // RIC-21 section reference
};

export const ROC_A_CARDS: RocACard[] = [
  {
    id: "roc-freq-pronunciation",
    stem: "Centre hands you off: \"Contact Toronto Terminal on 119.3.\" How should you read back the frequency?",
    options: [
      "\"One nineteen point three.\"",
      "\"One one niner decimal three.\"",
      "\"Eleven ninety-three.\"",
      "\"Frequency nineteen-three.\"",
    ],
    correctOption: 2,
    explanation: "Frequencies are transmitted by pronouncing each digit separately, with the decimal point spoken as \"decimal\" — never \"point.\" So 119.3 becomes \"one one niner decimal three.\" This prevents confusion on a noisy radio channel. (RIC-21 Sec 5.4)",
    flightContext: "Centre is handing you off to a new frequency. You need to read it back correctly.",
    phase: "enroute",
    riskPoints: 1,
    isCritical: false,
    sectionName: "ROC-A Radio Procedures",
    source: "RIC-21 Sec 5.4 – Transmission of Numbers",
  },
  {
    id: "roc-comm-priority",
    stem: "What is the highest priority for radio transmissions in the aeronautical service?",
    options: [
      "Flight safety messages.",
      "Distress communications.",
      "Meteorological messages.",
      "Urgency communications.",
    ],
    correctOption: 2,
    explanation: "The priority order is: (1) Distress, (2) Urgency, (3) Radio direction-finding, (4) Flight safety, (5) Meteorological, (6) Flight regularity, and so on. A MAYDAY call has absolute priority over everything else — all stations must cease transmissions that could interfere. (RIC-21 Sec 4.1)",
    flightContext: "Multiple stations are trying to transmit at the same time. You need to know who gets priority.",
    phase: "enroute",
    riskPoints: 1,
    isCritical: false,
    sectionName: "ROC-A Radio Procedures",
    source: "RIC-21 Sec 4.1 – Priorities of Communications",
  },
  {
    id: "roc-over-vs-out",
    stem: "You've just received your landing clearance and want to end the exchange. What do you say after your readback?",
    options: [
      "\"Over and out.\"",
      "\"Over.\"",
      "Just end the transmission — no closing word needed after a readback.",
      "\"Out.\"",
    ],
    correctOption: 3,
    explanation: "\"OVER\" means \"I expect a response.\" \"OUT\" means \"conversation ended, no response expected.\" You never say \"over and out\" — they contradict each other. After reading back a clearance, no closing word is needed because the exchange is complete. If you did close it, \"out\" would be correct — but in practice, readbacks close the loop on their own. (RIC-21 Sec 5.5, Appendix B)",
    flightContext: "You've just read back your landing clearance. How do you close this exchange?",
    phase: "arrival",
    riskPoints: 1,
    isCritical: false,
    sectionName: "ROC-A Radio Procedures",
    source: "RIC-21 Appendix B – Procedural Words and Phrases",
  },
  {
    id: "roc-correction-procedure",
    stem: "You're giving a position report and realize you said the wrong altitude. What do you say?",
    options: [
      "\"Repeat — three thousand five hundred.\"",
      "\"Correction — three thousand five hundred.\"",
      "\"Say again — three thousand five hundred.\"",
      "\"Disregard — three thousand five hundred.\"",
    ],
    correctOption: 2,
    explanation: "When you make an error in transmission, say \"CORRECTION\" followed by the last correct word and then the corrected version. \"SAY AGAIN\" is used to request a repetition of someone ELSE's transmission. \"REPEAT\" should never be used — in military contexts it means \"fire again.\" (RIC-21 Sec 5.7.3)",
    flightContext: "You're mid-transmission and realize you just said the wrong altitude. How do you fix it?",
    phase: "enroute",
    riskPoints: 1,
    isCritical: false,
    sectionName: "ROC-A Radio Procedures",
    source: "RIC-21 Sec 5.7.3 – Corrections and Repetitions",
  },
  {
    id: "roc-listen-before-transmit",
    stem: "Before making your first call on a new frequency, what should you do?",
    options: [
      "Transmit immediately to establish your presence.",
      "Listen long enough to ensure your transmission won't cause interference.",
      "Wait exactly 30 seconds.",
      "Transmit \"radio check\" first.",
    ],
    correctOption: 2,
    explanation: "Before transmitting, listen to the frequency long enough to satisfy yourself that your transmission will not cause harmful interference to communications already in progress. If interference seems likely, wait for a break. The only exception: distress, urgency, or safety communications may interrupt lower-priority traffic. (RIC-21 Sec 5.7.1)",
    flightContext: "Centre just handed you off to a new frequency. Your finger is on the PTT button.",
    phase: "enroute",
    riskPoints: 1,
    isCritical: false,
    sectionName: "ROC-A Radio Procedures",
    source: "RIC-21 Sec 5.7.1 – Calling",
  },
  {
    id: "roc-mayday-message-order",
    stem: "Your engine has failed. After transmitting \"MAYDAY MAYDAY MAYDAY, THIS IS {callsign} {callsign} {callsign},\" what element comes NEXT in the distress message?",
    options: [
      "Your position and altitude.",
      "The nature of the distress and kind of assistance required.",
      "Number of persons on board.",
      "Your flight plan information.",
    ],
    correctOption: 2,
    explanation: "The distress message format after the initial call is: (1) MAYDAY, (2) callsign, (3) nature of distress and assistance needed, (4) intentions, (5) position/altitude/heading, (6) persons on board, (7) other useful info, (8) callsign again. Nature of distress comes first because it tells rescuers what to prepare for. (RIC-21 Sec 6.8)",
    flightContext: "Engine failure over the lake. You've keyed the mic and said MAYDAY three times with your callsign. What do you say next?",
    phase: "enroute",
    riskPoints: 2,
    isCritical: false,
    sectionName: "ROC-A Radio Procedures",
    source: "RIC-21 Sec 6.8 – Distress Message",
  },
  // ─── Procedural words vocabulary ───────────────────────────────────────
  {
    id: "roc-affirm-negative",
    stem: "ATC asks: \"Confirm you have information Bravo?\" You do. What is the correct reply?",
    options: [
      "\"Yes, I have Bravo.\"",
      "\"Affirm.\"",
      "\"That's correct.\"",
      "\"10-4.\"",
    ],
    correctOption: 2,
    explanation: "\"AFFIRM\" is the standard radiotelephony word for \"yes.\" Never use casual language like \"yes,\" \"correct,\" \"10-4,\" or \"OK\" on the radio. \"NEGATIVE\" is the word for \"no.\" These exist because short, standardized words cut through radio noise and leave zero ambiguity. (RIC-21 Appendix B)",
    flightContext: "ATC is confirming whether you have the latest ATIS. You need to respond with proper phraseology.",
    phase: "preflight",
    riskPoints: 1,
    isCritical: false,
    sectionName: "ROC-A Radio Procedures",
    source: "RIC-21 Appendix B – Procedural Words and Phrases",
  },
  {
    id: "roc-wilco-vs-roger",
    stem: "ATC instructs: \"Report midfield downwind.\" What is the correct acknowledgement?",
    options: [
      "\"Roger.\"",
      "\"Wilco.\"",
      "\"Affirm.\"",
      "\"Copy that.\"",
    ],
    correctOption: 2,
    explanation: "\"WILCO\" means \"I have received your instructions, understood them, and WILL COMPLY.\" \"ROGER\" only means \"I received your transmission\" — it does NOT imply you'll do anything about it. When ATC gives you an instruction (not just information), WILCO is the correct response because it confirms you'll act on it. Never say \"copy\" or \"copy that\" — these are not standard aviation phraseology. (RIC-21 Appendix B)",
    flightContext: "Tower just gave you a specific instruction. You need to confirm you'll follow it.",
    phase: "arrival",
    riskPoints: 1,
    isCritical: false,
    sectionName: "ROC-A Radio Procedures",
    source: "RIC-21 Appendix B – Procedural Words and Phrases",
  },
  {
    id: "roc-say-again-partial",
    stem: "ATC gives you a clearance but you missed part of it. You caught everything after \"descend.\" How do you request a partial repeat?",
    options: [
      "\"Repeat the clearance.\"",
      "\"Say again.\"",
      "\"Say again all before descend.\"",
      "\"I didn't copy, say again please.\"",
    ],
    correctOption: 3,
    explanation: "To request repetition of a specific portion, use \"SAY AGAIN ALL BEFORE [word]\" or \"SAY AGAIN ALL AFTER [word]\" or \"SAY AGAIN [word] TO [word].\" This saves time — ATC only repeats the part you missed instead of the whole clearance. Never use the word \"REPEAT\" in aviation radio. (RIC-21 Sec 5.7.3)",
    flightContext: "You're copying a clearance and missed the first part. You need to ask for just the part you missed.",
    phase: "enroute",
    riskPoints: 1,
    isCritical: false,
    sectionName: "ROC-A Radio Procedures",
    source: "RIC-21 Sec 5.7.3 – Corrections and Repetitions",
  },
  {
    id: "roc-read-back",
    stem: "ATC says: \"Read back.\" What does this mean?",
    options: [
      "Acknowledge with \"Roger.\"",
      "Repeat the entire message back to ATC exactly as received.",
      "Confirm you understand by saying \"Wilco.\"",
      "Ask ATC to repeat their transmission.",
    ],
    correctOption: 2,
    explanation: "\"READ BACK\" is an instruction from ATC meaning: repeat all, or the specified part, of this message back to me exactly as received. ATC uses this when a clearance is complex or safety-critical and they need to verify you got it right. A readback error is how they catch mistakes before they become dangerous. (RIC-21 Appendix B)",
    flightContext: "ATC has just given you a complex clearance and wants to verify you received it correctly.",
    phase: "enroute",
    riskPoints: 1,
    isCritical: false,
    sectionName: "ROC-A Radio Procedures",
    source: "RIC-21 Appendix B – Procedural Words and Phrases",
  },

  // ─── Number / altitude / heading / time pronunciation ──────────────────
  {
    id: "roc-altitude-pronunciation",
    stem: "You're at 2,700 feet and ATC asks your altitude. How do you transmit it?",
    options: [
      "\"Twenty-seven hundred.\"",
      "\"Two thousand seven hundred.\"",
      "\"Two seven zero zero.\"",
      "\"Altitude twenty-seven.\"",
    ],
    correctOption: 2,
    explanation: "Altitudes are expressed as thousands plus hundreds of feet: \"two thousand seven hundred.\" Not \"twenty-seven hundred\" (casual) or digit-by-digit. Whole thousands use the word \"thousand\" — e.g., 11,000 = \"one one thousand.\" This is distinct from how frequencies and headings are transmitted. (RIC-21 Sec 5.4)",
    flightContext: "ATC is confirming your altitude. You need to transmit it in the correct format.",
    phase: "enroute",
    riskPoints: 1,
    isCritical: false,
    sectionName: "ROC-A Radio Procedures",
    source: "RIC-21 Sec 5.4 – Transmission of Numbers",
  },
  {
    id: "roc-heading-format",
    stem: "ATC assigns you a heading of 5 degrees. How do you read it back?",
    options: [
      "\"Heading five.\"",
      "\"Heading zero zero five.\"",
      "\"Heading five degrees.\"",
      "\"Heading zero five.\"",
    ],
    correctOption: 2,
    explanation: "Aircraft headings are always given in groups of three digits. So 5 degrees is \"heading zero zero five\" and 350 degrees is \"heading three five zero.\" The three-digit format prevents confusion between similar-sounding headings (e.g., \"five\" vs \"five zero\" vs \"five zero zero\"). (RIC-21 Sec 5.4)",
    flightContext: "ATC has given you a specific heading to fly. You need to read it back in the correct format.",
    phase: "enroute",
    riskPoints: 1,
    isCritical: false,
    sectionName: "ROC-A Radio Procedures",
    source: "RIC-21 Sec 5.4 – Transmission of Numbers",
  },
  {
    id: "roc-flight-level",
    stem: "ATC references \"FL265.\" How would this be spoken on the radio?",
    options: [
      "\"Flight level two six five.\"",
      "\"Flight level two hundred sixty-five.\"",
      "\"Twenty-six thousand five hundred.\"",
      "\"Two six five hundred.\"",
    ],
    correctOption: 1,
    explanation: "Flight levels are expressed by saying \"flight level\" followed by separate digits: FL265 = \"flight level two six five.\" Flight levels are used above 18,000 feet ASL in Canada and are based on a standard altimeter setting of 29.92. They're always spoken as individual digits, never grouped. (RIC-21 Sec 5.4)",
    flightContext: "You overhear a jet being assigned a flight level. You need to understand what it means.",
    phase: "enroute",
    riskPoints: 1,
    isCritical: false,
    sectionName: "ROC-A Radio Procedures",
    source: "RIC-21 Sec 5.4 – Transmission of Numbers",
  },
  {
    id: "roc-zulu-time",
    stem: "The current local time (EST) is 2:45 PM on the 16th. How would you express this in UTC on the radio?",
    options: [
      "\"One six one nine four five zulu.\"",
      "\"Two forty-five PM Eastern.\"",
      "\"One four four five.\"",
      "\"Sixteen nineteen forty-five.\"",
    ],
    correctOption: 1,
    explanation: "Time on the radio uses the 24-hour UTC system. 2:45 PM EST = 1945 UTC (EST is UTC-5). With the date, it's a six-figure group: day (16) + time (1945) = 161945Z. Spoken: \"one six one niner four five zulu.\" UTC avoids confusion between time zones — everyone references the same clock. (RIC-21 Sec 5.2)",
    flightContext: "You need to include a time in your position report. ATC expects it in UTC.",
    phase: "enroute",
    riskPoints: 1,
    isCritical: false,
    sectionName: "ROC-A Radio Procedures",
    source: "RIC-21 Sec 5.2 – Time and Date",
  },

  // ─── Regulations — privacy, control, superfluous comms ─────────────────
  {
    id: "roc-privacy",
    stem: "You overhear an interesting radio exchange between ATC and an air ambulance. Can you tell your friends about it?",
    options: [
      "Yes — radio communications are public.",
      "No — you're bound to preserve the privacy of communications unless authorized.",
      "Yes — but only if it was on a published frequency.",
      "Only if the aircraft was in distress.",
    ],
    correctOption: 2,
    explanation: "Section 9(2) of the Radiocommunication Act requires all persons who hear radio communications to preserve their privacy. You cannot divulge the contents or even the existence of communications, except as permitted by the addressee, authorized government officials, or court officers. Violations can result in fines up to $25,000 or one year imprisonment. The only exceptions are distress/urgency messages and those addressed to \"ALL STATIONS.\" (RIC-21 Sec 4.2)",
    flightContext: "After a flight, your friend asks what you heard on the radio. You need to know the rules about sharing.",
    phase: "preflight",
    riskPoints: 1,
    isCritical: false,
    sectionName: "ROC-A Radio Procedures",
    source: "RIC-21 Sec 4.2 – Privacy of Communications",
  },
  {
    id: "roc-comm-control",
    stem: "In a radio exchange between your aircraft and a ground station, who has control of the communications?",
    options: [
      "The aircraft, since the pilot is PIC.",
      "Whoever transmitted first.",
      "The ground station.",
      "Neither — it's shared equally.",
    ],
    correctOption: 3,
    explanation: "In air-to-ground communications, the ground station retains control of communications — they decide the order of transmissions, frequency to use, and when to suspend communications. The exception is during distress or urgency, where the station initiating the priority call takes control. In aircraft-to-aircraft communications, the station being CALLED is the controlling station. (RIC-21 Sec 4.3)",
    flightContext: "Multiple aircraft are calling ATC at the same time. You need to know who decides the order.",
    phase: "enroute",
    riskPoints: 1,
    isCritical: false,
    sectionName: "ROC-A Radio Procedures",
    source: "RIC-21 Sec 4.3 – Control of Communications",
  },
  {
    id: "roc-superfluous",
    stem: "Which of the following is prohibited on aeronautical radio frequencies?",
    options: [
      "Position reports.",
      "Unnecessary conversation, slang, and profanity.",
      "Requesting a radio check.",
      "Reporting weather conditions.",
    ],
    correctOption: 2,
    explanation: "Aeronautical radio must be restricted to communications relating to safety and flight regularity. Superfluous communication, profane language, and obscene language are strictly prohibited under the Radiocommunication Regulations. Penalties include fines up to $5,000 or one year imprisonment. No slang (\"10-4\", \"breaker breaker\"), no casual chat, no profanity — even if you think no one is listening. (RIC-21 Sec 4.4)",
    flightContext: "You're tempted to make a casual comment on frequency after a bumpy approach. Think again.",
    phase: "enroute",
    riskPoints: 1,
    isCritical: false,
    sectionName: "ROC-A Radio Procedures",
    source: "RIC-21 Sec 4.4 – Superfluous Communications and Interference",
  },
  {
    id: "roc-false-distress",
    stem: "What is the penalty for knowingly transmitting a false distress signal?",
    options: [
      "A warning letter from Transport Canada.",
      "Loss of radio operator certificate only.",
      "A fine up to $5,000 and/or imprisonment up to one year.",
      "No penalty if no one was harmed.",
    ],
    correctOption: 3,
    explanation: "Section 9(1)(a) of the Radiocommunication Act prohibits sending false or fraudulent distress signals, messages, or calls. Penalties on summary conviction include a fine up to $5,000 and/or imprisonment up to one year for individuals. A false MAYDAY triggers full SAR response — aircraft diverted, rescue crews deployed, all at enormous cost and risk to the rescuers. (RIC-21 Sec 4.5)",
    flightContext: "Someone suggests testing the emergency frequency 'as a joke.' You need to know the consequences.",
    phase: "preflight",
    riskPoints: 2,
    isCritical: false,
    sectionName: "ROC-A Radio Procedures",
    source: "RIC-21 Sec 4.5 – False Distress Signals",
  },

  // ─── Emergency procedures — MAYDAY RELAY, acknowledgement, silence ─────
  {
    id: "roc-mayday-relay",
    stem: "You hear an unacknowledged MAYDAY from another aircraft. No one else responds. What format do you use to relay it?",
    options: [
      "\"MAYDAY\" three times, then the distress aircraft's information.",
      "\"MAYDAY RELAY\" three times, \"THIS IS\" your callsign three times, then \"MAYDAY\" once followed by the distress aircraft's details.",
      "\"PAN PAN RELAY\" three times, then the information.",
      "Simply repeat the original MAYDAY word for word.",
    ],
    correctOption: 2,
    explanation: "The relay format is: (1) \"MAYDAY RELAY\" spoken three times, (2) \"THIS IS,\" (3) YOUR callsign three times, (4) \"MAYDAY\" once, (5) the distress aircraft's details (callsign, nature, position, persons on board, etc.). This format clearly identifies that you're relaying someone else's distress, not in distress yourself. (RIC-21 Sec 6.16)",
    flightContext: "You've heard a MAYDAY that no one has acknowledged. You're the only one who can relay it.",
    phase: "enroute",
    riskPoints: 2,
    isCritical: false,
    sectionName: "ROC-A Radio Procedures",
    source: "RIC-21 Sec 6.16 – Relay of a Distress Message",
  },
  {
    id: "roc-mayday-ack",
    stem: "You hear a MAYDAY and you're able to assist. What is the correct acknowledgement format?",
    options: [
      "\"Roger your MAYDAY.\"",
      "\"MAYDAY,\" then the distress aircraft's callsign three times, \"THIS IS\" your callsign three times, \"RECEIVED MAYDAY.\"",
      "\"Copy MAYDAY, this is\" your callsign.",
      "\"MAYDAY RECEIVED,\" your callsign once.",
    ],
    correctOption: 2,
    explanation: "The acknowledgement format is: (1) \"MAYDAY,\" (2) the distress aircraft's callsign three times, (3) \"THIS IS,\" (4) your callsign three times, (5) \"RECEIVED MAYDAY.\" The repetitions ensure the distressed pilot hears clearly which station is acknowledging. After acknowledging, you take control of distress traffic or transfer it to a ground station. (RIC-21 Sec 6.14)",
    flightContext: "A Piper has declared MAYDAY nearby. You need to acknowledge correctly and help coordinate.",
    phase: "enroute",
    riskPoints: 2,
    isCritical: false,
    sectionName: "ROC-A Radio Procedures",
    source: "RIC-21 Sec 6.14 – Acknowledgment of Receipt of a Distress Message",
  },
  {
    id: "roc-seelonce",
    stem: "During a distress situation, the controlling station transmits \"SEELONCE MAYDAY.\" What must you do?",
    options: [
      "Switch to another frequency.",
      "Cease all transmissions immediately except distress traffic.",
      "Acknowledge by transmitting \"SEELONCE\" back.",
      "Continue normal transmissions but avoid the distress frequency.",
    ],
    correctOption: 2,
    explanation: "\"SEELONCE MAYDAY\" (from French 'silence') means radio silence has been imposed by the station controlling distress traffic. ALL stations that hear it must immediately cease transmissions on that frequency except those involved in the distress. \"SEELONCE DISTRESS\" can be imposed by other stations near the scene. Silence remains until \"SEELONCE FEENEE\" (silence finished) is transmitted. (RIC-21 Sec 6.17)",
    flightContext: "You hear a silence command on the frequency during an emergency. You need to comply immediately.",
    phase: "enroute",
    riskPoints: 2,
    isCritical: false,
    sectionName: "ROC-A Radio Procedures",
    source: "RIC-21 Sec 6.17 – Imposition of Silence",
  },

  // ─── Phonetic alphabet ─────────────────────────────────────────────────
  {
    id: "roc-phonetic-alphabet",
    stem: "Using the ITU phonetic alphabet, how do you spell the letters \"D-G-S\"?",
    options: [
      "David, George, Sam.",
      "Delta, Golf, Sierra.",
      "Dog, Golf, Sugar.",
      "Delta, Gamma, Sierra.",
    ],
    correctOption: 2,
    explanation: "The ITU/ICAO phonetic alphabet must be used for all isolated letters on aviation radio. D = Delta, G = Golf, S = Sierra. Never use non-standard phonetics like \"David\" or \"Sugar\" — these were used in older systems but are not recognized internationally. The ITU alphabet was specifically designed so each word sounds distinct in any accent and through radio compression. (RIC-21 Sec 5.3)",
    flightContext: "You need to spell out part of a waypoint name on the radio. Use the correct phonetic alphabet.",
    phase: "preflight",
    riskPoints: 1,
    isCritical: false,
    sectionName: "ROC-A Radio Procedures",
    source: "RIC-21 Sec 5.3 – ITU Phonetic Alphabet",
  },
  {
    id: "roc-number-nine",
    stem: "How is the number 9 pronounced on aeronautical radio?",
    options: [
      "\"Nine.\"",
      "\"Niner.\"",
      "\"Nein.\"",
      "\"Nyne.\"",
    ],
    correctOption: 2,
    explanation: "The number 9 is pronounced \"NINER\" (NIN-er) on aviation radio. This prevents confusion with the German word \"nein\" (no) and with \"five\" in noisy conditions. Other special pronunciations: 3 = \"TREE\", 4 = \"FOW-er\", 5 = \"FIFE\", 0 = \"ZE-RO.\" These pronunciations are standardized internationally and must be used on all aeronautical frequencies. (RIC-21 Sec 5.3)",
    flightContext: "You're reading back a squawk code that includes the number 9.",
    phase: "enroute",
    riskPoints: 1,
    isCritical: false,
    sectionName: "ROC-A Radio Procedures",
    source: "RIC-21 Sec 5.3 – ITU Phonetic Alphabet",
  },
];

/** Lookup map for ROC-A cards by ID */
export const ROC_A_MAP: Record<string, RocACard> = {};
for (const card of ROC_A_CARDS) {
  ROC_A_MAP[card.id] = card;
}
